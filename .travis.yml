language: python
python:
  - "2.7"

# command to install dependencies
install:
  - pip install -r requirements.txt
# command to run tests
script: py.test

#
# Then repo is configured on Travis CI to build pull requests and Branches
# As for branches though, we only want Master to build (after a merge of a PR)
#
branches:
  only:
    - master


before_deploy:
  script: ./package-artifact.sh

deploy:
  provider: s3
  access_key_id: $ARTIFACTS_KEY
  secret_access_key: $ARTIFACTS_SECRET
  bucket: $ARTIFACTS_BUCKET
  skip_cleanup: true
